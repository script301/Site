<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - DevTools Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/style.css">
    <style>
        .hidden { display: none !important; }
        .modal-bg { background: rgba(0,0,0,0.8); }
    </style>
</head>
<body class="bg-black min-h-screen">
    <!-- Login Form -->
    <div id="login-section" class="flex flex-col items-center justify-center min-h-screen">
        <div class="bg-gray-900 p-8 rounded-lg shadow-lg border border-gray-800 w-full max-w-sm">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Administração</h2>
            <form id="login-form" autocomplete="off">
                <label class="block mb-2 text-gray-300">Usuário</label>
                <input type="text" id="username" class="w-full p-2 rounded bg-gray-800 text-white mb-4" required>
                <label class="block mb-2 text-gray-300">Senha</label>
                <input type="password" id="password" class="w-full p-2 rounded bg-gray-800 text-white mb-6" required>
                <button type="submit" class="w-full py-2 rounded bg-gradient-to-r from-pink-500 to-rose-500 text-white font-semibold hover:from-pink-600 hover:to-rose-600 transition">Entrar</button>
                <p id="login-error" class="text-red-500 text-sm mt-4 hidden">Usuário ou senha inválidos.</p>
            </form>
        </div>
    </div>

    <div id="admin-root"></div>

    <!-- Modal Nova Ferramenta -->
    <div id="tool-modal-bg" class="fixed inset-0 z-50 flex items-center justify-center modal-bg hidden">
        <div class="bg-gray-900 p-8 rounded-lg shadow-lg border border-gray-800 w-full max-w-lg relative">
            <button id="close-tool-modal" class="absolute top-2 right-2 text-gray-400 hover:text-pink-400 text-xl">&times;</button>
            <h3 class="text-xl font-bold text-white mb-4" id="tool-modal-title">Nova Ferramenta</h3>
            <form id="tool-form">
                <label class="block text-gray-300 mt-2">Nome</label>
                <input type="text" id="tool-name" class="w-full p-2 rounded bg-gray-800 text-white" required>
                <label class="block text-gray-300 mt-2">Descrição</label>
                <textarea id="tool-desc" class="w-full p-2 rounded bg-gray-800 text-white" required></textarea>
                <label class="block text-gray-300 mt-2">Ícone (classe FontAwesome)</label>
                <input type="text" id="tool-icon" class="w-full p-2 rounded bg-gray-800 text-white" placeholder="ex: fas fa-code" required>
                <label class="block text-gray-300 mt-2">Versão</label>
                <input type="text" id="tool-version" class="w-full p-2 rounded bg-gray-800 text-white" required>
                <label class="block text-gray-300 mt-2">Estrelas</label>
                <input type="number" id="tool-stars" class="w-full p-2 rounded bg-gray-800 text-white" required>
                <label class="block text-gray-300 mt-2">Link</label>
                <input type="text" id="tool-link" class="w-full p-2 rounded bg-gray-800 text-white" required>
                <button type="submit" class="mt-4 w-full py-2 rounded bg-gradient-to-r from-pink-500 to-rose-500 text-white font-semibold hover:from-pink-600 hover:to-rose-600 transition">Salvar</button>
            </form>
        </div>
    </div>

    <script>
    // --- Autenticação ---
    const USER = "script";
    const PASS = "1524";
    const loginSection = document.getElementById('login-section');
    const loginForm = document.getElementById('login-form');
    const loginError = document.getElementById('login-error');
    const adminRoot = document.getElementById('admin-root');

    // Seed inicial
    function seedInitialTools() {
        if (!localStorage.getItem('tools') || localStorage.getItem('tools') === "[]") {
            const initialTools = [
                {
                    name: "YouTube Downloader",
                    desc: "Baixe vídeos e áudios do YouTube de forma rápida e fácil, em diversos formatos.",
                    icon: "fab fa-youtube",
                    version: "1.0.0",
                    stars: 37,
                    link: "tool-youtube-downloader.html"
                },
                {
                    name: "Conversor de Mídia",
                    desc: "Converta arquivos de áudio e vídeo entre diversos formatos de maneira simples e rápida.",
                    icon: "fas fa-exchange-alt",
                    version: "1.0.0",
                    stars: 42,
                    link: "tool-media-converter.html"
                }
            ];
            localStorage.setItem('tools', JSON.stringify(initialTools));
        }
    }
    function seedInitialTabs() {
        if (!localStorage.getItem('tabs') || localStorage.getItem('tabs') === "[]") {
            const initialTabs = [
                { name: "Home", link: "index.html" },
                { name: "Tools", link: "tools.html" },
                { name: "GitHub", link: "github.html" },
                { name: "About", link: "about.html" }
            ];
            localStorage.setItem('tabs', JSON.stringify(initialTabs));
        }
    }

    // Renderiza painel admin
    function renderAdminPanel() {
        adminRoot.innerHTML = `
        <div id="admin-panel" class="min-h-screen">
            <nav class="bg-black/80 border-b border-gray-800 px-4 py-3 flex justify-between items-center">
                <span class="text-xl font-bold gradient-text">Painel Admin</span>
                <button id="logout-btn" class="px-4 py-2 rounded bg-gray-800 text-white hover:bg-pink-600">Sair</button>
            </nav>
            <div class="max-w-5xl mx-auto py-8 px-4">
                <h2 class="text-2xl font-bold text-white mb-6">Gerenciar Ferramentas</h2>
                <div class="mb-10">
                    <button id="add-tool-btn" class="mb-4 px-4 py-2 rounded bg-gradient-to-r from-pink-500 to-rose-500 text-white font-semibold hover:from-pink-600 hover:to-rose-600 transition">
                        + Nova Ferramenta
                    </button>
                    <div id="tools-list" class="space-y-4"></div>
                </div>
                <h2 class="text-2xl font-bold text-white mb-6">Gerenciar Abas</h2>
                <div class="mb-10">
                    <button id="add-tab-btn" class="mb-4 px-4 py-2 rounded bg-gradient-to-r from-pink-500 to-rose-500 text-white font-semibold hover:from-pink-600 hover:to-rose-600 transition">
                        + Nova Aba
                    </button>
                    <div id="tabs-list" class="space-y-4"></div>
                </div>
            </div>
        </div>
        `;
        document.getElementById('logout-btn').onclick = function() {
            sessionStorage.removeItem('admin');
            adminRoot.innerHTML = '';
            loginSection.style.display = '';
            window.scrollTo(0, 0);
        };
        renderTools();
        renderTabs();
        document.getElementById('add-tool-btn').onclick = openToolModal;
        document.getElementById('add-tab-btn').onclick = openTabModal;
    }

    // Ferramentas
    function getTools() {
        return JSON.parse(localStorage.getItem('tools') || '[]');
    }
    function setTools(tools) {
        localStorage.setItem('tools', JSON.stringify(tools));
        renderTools();
    }
    function renderTools() {
        const list = document.getElementById('tools-list');
        const tools = getTools();
        list.innerHTML = '';
        if (tools.length === 0) {
            list.innerHTML = '<p class="text-gray-400">Nenhuma ferramenta cadastrada.</p>';
        }
        tools.forEach((tool, idx) => {
            const div = document.createElement('div');
            div.className = "bg-gray-800 rounded-lg p-4 flex items-center justify-between";
            div.innerHTML = `
                <div>
                    <span class="inline-block bg-gray-700 px-2 py-1 rounded mr-2"><i class="${tool.icon} text-pink-400"></i></span>
                    <span class="text-white font-semibold">${tool.name}</span>
                    <span class="text-gray-400 ml-2 text-sm">v${tool.version}</span>
                    <span class="text-pink-400 ml-2 text-xs"><i class="fas fa-star"></i> ${tool.stars}</span>
                    <div class="text-gray-300 text-sm">${tool.desc}</div>
                </div>
                <div class="flex gap-2">
                    <button onclick="editTool(${idx})" class="px-3 py-1 rounded bg-pink-500 text-white hover:bg-pink-600">Editar</button>
                    <button onclick="deleteTool(${idx})" class="px-3 py-1 rounded bg-gray-700 text-white hover:bg-red-600">Excluir</button>
                </div>
            `;
            list.appendChild(div);
        });
    }

    // Modal Nova Ferramenta
    const toolModalBg = document.getElementById('tool-modal-bg');
    const toolForm = document.getElementById('tool-form');
    const closeToolModalBtn = document.getElementById('close-tool-modal');
    let editingToolIdx = null;

    function openToolModal(tool = null, idx = null) {
        toolModalBg.classList.remove('hidden');
        document.getElementById('tool-modal-title').innerText = tool ? 'Editar Ferramenta' : 'Nova Ferramenta';
        toolForm.reset();
        editingToolIdx = idx;
        if (tool) {
            document.getElementById('tool-name').value = tool.name;
            document.getElementById('tool-desc').value = tool.desc;
            document.getElementById('tool-icon').value = tool.icon;
            document.getElementById('tool-version').value = tool.version;
            document.getElementById('tool-stars').value = tool.stars;
            document.getElementById('tool-link').value = tool.link;
        }
    }
    closeToolModalBtn.onclick = () => toolModalBg.classList.add('hidden');
    toolModalBg.onclick = (e) => { if (e.target === toolModalBg) toolModalBg.classList.add('hidden'); };
    toolForm.onsubmit = function(e) {
        e.preventDefault();
        const tool = {
            name: document.getElementById('tool-name').value,
            desc: document.getElementById('tool-desc').value,
            icon: document.getElementById('tool-icon').value,
            version: document.getElementById('tool-version').value,
            stars: parseInt(document.getElementById('tool-stars').value),
            link: document.getElementById('tool-link').value
        };
        let tools = getTools();
        if (editingToolIdx !== null) {
            tools[editingToolIdx] = tool;
        } else {
            tools.push(tool);
        }
        setTools(tools);
        toolModalBg.classList.add('hidden');
    };
    window.editTool = function(idx) {
        const tool = getTools()[idx];
        openToolModal(tool, idx);
    };
    window.deleteTool = function(idx) {
        if (confirm('Deseja realmente excluir esta ferramenta?')) {
            const tools = getTools();
            tools.splice(idx, 1);
            setTools(tools);
        }
    };

    // Abas
    function getTabs() {
        return JSON.parse(localStorage.getItem('tabs') || '[]');
    }
    function setTabs(tabs) {
        localStorage.setItem('tabs', JSON.stringify(tabs));
        renderTabs();
    }
    function renderTabs() {
        const list = document.getElementById('tabs-list');
        const tabs = getTabs();
        list.innerHTML = '';
        if (tabs.length === 0) {
            list.innerHTML = '<p class="text-gray-400">Nenhuma aba personalizada.</p>';
        }
        tabs.forEach((tab, idx) => {
            const div = document.createElement('div');
            div.className = "bg-gray-800 rounded-lg p-4 flex items-center justify-between";
            div.innerHTML = `
                <div>
                    <span class="text-white font-semibold">${tab.name}</span>
                    <span class="text-gray-400 ml-2 text-sm">${tab.link}</span>
                </div>
                <div class="flex gap-2">
                    <button onclick="editTab(${idx})" class="px-3 py-1 rounded bg-pink-500 text-white hover:bg-pink-600">Editar</button>
                    <button onclick="deleteTab(${idx})" class="px-3 py-1 rounded bg-gray-700 text-white hover:bg-red-600">Excluir</button>
                </div>
            `;
            list.appendChild(div);
        });
    }
    function openTabModal(tab = null, idx = null) {
        alert('Funcionalidade de abas personalizadas pode ser implementada aqui.');
    }
    window.editTab = function(idx) { openTabModal(getTabs()[idx], idx); };
    window.deleteTab = function(idx) {
        if (confirm('Deseja realmente excluir esta aba?')) {
            const tabs = getTabs();
            tabs.splice(idx, 1);
            setTabs(tabs);
        }
    };

    // Inicialização
    document.addEventListener('DOMContentLoaded', function() {
        adminRoot.innerHTML = '';
        loginSection.style.display = '';
        if (sessionStorage.getItem('admin') === '1') {
            seedInitialTools();
            seedInitialTabs();
            loginSection.style.display = 'none';
            renderAdminPanel();
        }
    });

    loginForm.onsubmit = function(e) {
        e.preventDefault();
        loginError.classList.add('hidden');
        const user = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        if (user === USER && pass === PASS) {
            sessionStorage.setItem('admin', '1');
            seedInitialTools();
            seedInitialTabs();
            loginSection.style.display = 'none';
            renderAdminPanel();
        } else {
            loginError.classList.remove('hidden');
        }
    };
    </script>
</body>
</html>.style.display = 'none';
            renderAdminPanel();
        }
    });

    loginForm.onsubmit = function(e) {
        e.preventDefault();
        loginError.classList.add('hidden');
        const user = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        if (user === USER && pass === PASS) {
            sessionStorage.setItem('admin', '1');
            seedInitialTools();
            seedInitialTabs();
            loginSection.style.display = 'none';
            renderAdminPanel();
        } else {
            loginError.classList.remove('hidden');
        }
    };
    </script>
</body>
</html>